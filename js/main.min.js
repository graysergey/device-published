"use strict";var ENTER=13,ESCAPE=27,feedbackLink=document.querySelector(".contacts__btn"),feedbackPopup=document.querySelector(".popup-feedback"),feedbackForm=feedbackPopup.querySelector(".popup-feedback__form"),feedbackName=feedbackPopup.querySelector(".popup-feedback__input-name"),feedbackEmail=feedbackPopup.querySelector(".popup-feedback__input-email"),feedbackMassage=feedbackPopup.querySelector(".popup-feedback__textarea"),feedbackCloseButton=feedbackPopup.querySelector(".popup-feedback__btn-close"),storageName="",storageEmail="",storageMassage="",checkLocalStorage=function(){try{storageName=localStorage.getItem("login")}catch(e){storageName=!1}try{storageEmail=localStorage.getItem("email")}catch(e){storageEmail=!1}try{storageMassage=localStorage.getItem("massage")}catch(e){storageMassage=!1}},onButtonFeedbackOpen=function(e){e.keyCode!==ENTER&&"click"!==e.type||(e.preventDefault(),feedbackPopup.classList.add("popup-feedback--show"),checkLocalStorage(),storageName?(feedbackName.value=storageName,feedbackEmail.focus()):feedbackName.focus(),storageEmail?(feedbackEmail.value=storageEmail,5<=feedbackEmail.value.length&&-1!==feedbackEmail.value.search("@")&&-1!==feedbackEmail.value.indexOf(".")&&(feedbackName.value?feedbackMassage.focus():feedbackName.focus())):feedbackName.value?feedbackEmail.focus():feedbackName.focus(),storageMassage&&(feedbackMassage.value=storageMassage),setFeedbackPopupListeners())},onButtonClose=function e(a){a.keyCode!==ESCAPE&&"click"!==a.type||(a.preventDefault(),feedbackPopup.classList.contains("popup-feedback--show")&&(feedbackPopup.classList.remove("popup-feedback--show"),feedbackCloseButton.removeEventListener("click",e),window.removeEventListener("keydown",e)),2<=feedbackName.value.length?localStorage.setItem("login",feedbackName.value):(localStorage.removeItem("login"),feedbackName.value=""),feedbackEmail.value&&localStorage.setItem("email",feedbackEmail.value),feedbackMassage.value&&localStorage.setItem("massage",feedbackMassage.value))},onButtonSubmit=function(e){feedbackName.value?2<=feedbackName.value.length?localStorage.setItem("login",feedbackName.value):feedbackName.value.length<2&&(localStorage.removeItem("login"),feedbackName.value=""):(e.preventDefault(),feedbackName.classList.add("popup-feedback__error"),setTimeout(function(){feedbackName.classList.remove("popup-feedback__error")},1e3)),feedbackEmail.value?localStorage.setItem("email",feedbackEmail.value):(console.log("типа нету имени ",feedbackEmail.value),e.preventDefault(),feedbackEmail.classList.add("popup-feedback__error"),setTimeout(function(){feedbackEmail.classList.remove("popup-feedback__error")},1e3)),feedbackMassage.value?localStorage.setItem("massage",feedbackMassage.value):(e.preventDefault(),feedbackMassage.classList.add("popup-feedback__error"),setTimeout(function(){feedbackMassage.classList.remove("popup-feedback__error")},1e3))},setFeedbackPopupListeners=function(){feedbackCloseButton.addEventListener("click",onButtonClose),window.addEventListener("keydown",onButtonClose),feedbackForm.addEventListener("submit",onButtonSubmit)};feedbackLink.addEventListener("click",onButtonFeedbackOpen),feedbackLink.addEventListener("keydown",onButtonFeedbackOpen);var mapLink=document.querySelector(".contacts__map"),mapPopup=document.querySelector(".popup-map"),mapCloseButton=mapPopup.querySelector(".popup-map__close"),onLinkMap=function(e){e.keyCode!==ENTER&&"click"!==e.type||(e.preventDefault(),mapPopup.classList.add("popup-map--show"),mapCloseButton.addEventListener("click",onButtonCloseMap),window.addEventListener("keydown",onButtonCloseMap))},onButtonCloseMap=function e(a){a.keyCode!==ESCAPE&&"click"!==a.type||(a.preventDefault(),mapPopup.classList.remove("popup-map--show"),mapCloseButton.removeEventListener("click",e),window.removeEventListener("click",e))};mapLink.addEventListener("click",onLinkMap),mapLink.addEventListener("keydown",onLinkMap);